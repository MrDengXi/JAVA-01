###### **分库分表总结**
脑图：`./img/分库分表.png`，`./img/分布式事务.png`

总结
互联网行业的发展，目前系统的可用性和日益增长数据进行数据分片，是当下系统面临的两个主要问题。本章节主要学习的是MySQL的可用性，和分库分表。

- MySQL可用性

  最为基础的是读写分离，可以解决读的压力，但是写的压力依然存在；手动切换方式就不提了，然后MHA、MGR、MySQL Cluster、Orchestrator，一步步优化，做到保证主从数据一致性，自动主从切换，管理节点支持集群，真正做到整体方案的高可用。

- 分库分表

  垂直拆分，是将大表、大数据库拆分成多个，减少单库单表的压力。水平拆分建议使用水平拆库，可以将数据分布到多个数据库实例，减小每个数据库的IO压力。

- 分布式事务

  上面的MySQL分库分表、读写分离不是解决问题的银弹，也是需要付出一定的代价，一方面是给数据库管理带来了压力，另外一方面是分布式事务带来困难。单个数据库的事务，数据底层已经实现，但是数据分片之后，在多个数据库之间可以通过XA强一致性事务、柔性事务（TCC、SAGA、AT）技术手段实现分布式事务。