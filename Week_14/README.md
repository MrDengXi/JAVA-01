###### **高并发秒杀系统的设计**

**秒杀的特点：**
高并发、海量用户、高性能、高可用

**难点：**
大量的并发读、写，应用难以支撑
超卖问题

##### 需求设计

- 满足秒杀业务的高并发需求
- 具备耦合性低，高可用、维护性高的通用性秒杀系统

1、客户端设计
    1)客户端可以先直接过滤大部分的请求（随机过滤，添加信息确认界面，最后到秒杀界面）
    2）专门为商品生成商品页面和订单页面，这些页面以静态HTML为主，包括的动态信息尽量少
    
2、后端设计
    1)通过网关负载均衡，将流量均匀分发到不同节点上
    2)网关拦截，通过分控系统拦截频繁访问的ip请求
    3)网关限流，根据服务器负载，超过设计阈值，则拒绝后续请求
    4)使用消息队列来应对瞬时流量的冲击，将同步操作转为异步处理
    5)预判库存余量，排队的数量已经大于库存余量后，后续的请求直接返回秒杀失败
    
3、数据库
    1)预扣库存，拍下时预扣库存，付款后实际扣减
